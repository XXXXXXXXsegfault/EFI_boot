#ifndef _My_OS_Memcmp_
#define _My_OS_Memcmp_
int memcmp(void *ptr1,void *ptr2,unsigned long long int size);
asm("memcmp:");
asm("push %rcx");
asm("push %rdx");
asm("push %rbx");
asm("push %rbp");
asm("push %rsi");
asm("push %rdi");
asm("push %r8");
asm("push %r9");
asm("push %r10");
asm("push %r11");
asm("cmp $8,%rdx");
asm("jb _memcmp_X1");
asm("mov %dil,%al");
asm("and $7,%al");
asm("je _memcmp_X3");
asm("or $0xf8,%al");
asm("mov %al,%ah");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("jne _memcmp_X2");
asm("inc %rdi");
asm("inc %rsi");
asm("dec %rdx");
asm("inc %ah");
asm("je _memcmp_X3");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("jne _memcmp_X2");
asm("inc %rdi");
asm("inc %rsi");
asm("dec %rdx");
asm("inc %ah");
asm("je _memcmp_X3");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("jne _memcmp_X2");
asm("inc %rdi");
asm("inc %rsi");
asm("dec %rdx");
asm("inc %ah");
asm("je _memcmp_X3");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("jne _memcmp_X2");
asm("inc %rdi");
asm("inc %rsi");
asm("dec %rdx");
asm("inc %ah");
asm("je _memcmp_X3");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("jne _memcmp_X2");
asm("inc %rdi");
asm("inc %rsi");
asm("dec %rdx");
asm("inc %ah");
asm("je _memcmp_X3");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("jne _memcmp_X2");
asm("inc %rdi");
asm("inc %rsi");
asm("dec %rdx");
asm("inc %ah");
asm("je _memcmp_X3");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("jne _memcmp_X2");
asm("inc %rdi");
asm("inc %rsi");
asm("dec %rdx");
asm("_memcmp_X3:");
asm("mov %rsp,%rbp");
asm("mov %rdi,%rsp");
asm("_memcmp_X4:");
asm("sub $64,%rdx");
asm("jb _memcmp_X5");
asm("pop %rax");
asm("pop %rcx");
asm("pop %rbx");
asm("pop %rdi");
asm("pop %r8");
asm("pop %r9");
asm("pop %r10");
asm("pop %r11");
asm("sub (%rsi),%rax");
asm("jne _memcmp_A2");
asm("sub 8(%rsi),%rcx");
asm("jne _memcmp_A3");
asm("sub 16(%rsi),%rbx");
asm("jne _memcmp_A4");
asm("sub 24(%rsi),%rdi");
asm("jne _memcmp_A5");
asm("sub 32(%rsi),%r8");
asm("jne _memcmp_A6");
asm("sub 40(%rsi),%r9");
asm("jne _memcmp_A7");
asm("sub 48(%rsi),%r10");
asm("jne _memcmp_A8");
asm("sub 56(%rsi),%r11");
asm("jne _memcmp_A9");
asm("lea 64(%rsi),%rsi");
asm("jmp _memcmp_X4");
asm("_memcmp_A9:");
asm("mov %r11,%r10");
asm("_memcmp_A8:");
asm("mov %r10,%r9");
asm("_memcmp_A7:");
asm("mov %r9,%r8");
asm("_memcmp_A6:");
asm("mov %r8,%rdi");
asm("_memcmp_A5:");
asm("mov %rdi,%rbx");
asm("_memcmp_A4:");
asm("mov %rbx,%rcx");
asm("_memcmp_A3:");
asm("mov %rcx,%rax");
asm("_memcmp_A2:");
asm("mov %rbp,%rsp");
asm("_memcmp_A1:");
asm("test %al,%al");
asm("jne _memcmp_X2");
asm("mov %ah,%al");
asm("test %al,%al");
asm("jne _memcmp_X2");
asm("shr $16,%rax");
asm("test %al,%al");
asm("jne _memcmp_X2");
asm("mov %ah,%al");
asm("test %al,%al");
asm("jne _memcmp_X2");
asm("shr $16,%rax");
asm("test %al,%al");
asm("jne _memcmp_X2");
asm("mov %ah,%al");
asm("test %al,%al");
asm("jne _memcmp_X2");
asm("shr $16,%eax");
asm("test %al,%al");
asm("jne _memcmp_X2");
asm("mov %ah,%al");
asm("jmp _memcmp_X2");
asm("_memcmp_X5:");
asm("mov %rsp,%rdi");
asm("mov %rbp,%rsp");
asm("test $32,%rdx");
asm("je _memcmp_Y1");
asm("mov (%rdi),%rax");
asm("sub (%rsi),%rax");
asm("jne _memcmp_A1");
asm("mov 8(%rdi),%rax");
asm("sub 8(%rsi),%rax");
asm("jne _memcmp_A1");
asm("mov 16(%rdi),%rax");
asm("sub 16(%rsi),%rax");
asm("jne _memcmp_A1");
asm("mov 24(%rdi),%rax");
asm("sub 24(%rsi),%rax");
asm("jne _memcmp_A1");
asm("lea 32(%rdi),%rdi");
asm("lea 32(%rsi),%rsi");
asm("_memcmp_Y1:");
asm("test $16,%rdx");
asm("je _memcmp_Y2");
asm("mov (%rdi),%rax");
asm("sub (%rsi),%rax");
asm("jne _memcmp_A1");
asm("mov 8(%rdi),%rax");
asm("sub 8(%rsi),%rax");
asm("jne _memcmp_A1");
asm("lea 16(%rdi),%rdi");
asm("lea 16(%rsi),%rsi");
asm("_memcmp_Y2:");
asm("test $8,%rdx");
asm("je _memcmp_Y3");
asm("mov (%rdi),%rax");
asm("sub (%rsi),%rax");
asm("jne _memcmp_A1");
asm("lea 8(%rdi),%rdi");
asm("lea 8(%rsi),%rsi");
asm("_memcmp_Y3:");
asm("and $7,%dl");
asm("_memcmp_X1:");
asm("test %dl,%dl");
asm("je _memcmp_X2");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("jne _memcmp_X2");
asm("inc %rdi");
asm("inc %rsi");
asm("dec %dl");
asm("je _memcmp_X2");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("jne _memcmp_X2");
asm("inc %rdi");
asm("inc %rsi");
asm("dec %dl");
asm("je _memcmp_X2");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("jne _memcmp_X2");
asm("inc %rdi");
asm("inc %rsi");
asm("dec %dl");
asm("je _memcmp_X2");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("jne _memcmp_X2");
asm("inc %rdi");
asm("inc %rsi");
asm("dec %dl");
asm("je _memcmp_X2");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("jne _memcmp_X2");
asm("inc %rdi");
asm("inc %rsi");
asm("dec %dl");
asm("je _memcmp_X2");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("jne _memcmp_X2");
asm("inc %rdi");
asm("inc %rsi");
asm("dec %dl");
asm("je _memcmp_X2");
asm("mov (%rdi),%al");
asm("sub (%rsi),%al");
asm("_memcmp_X2:");
asm("test %al,%al");
asm("je _memcmp_R1");
asm("test $0x80,%al");
asm("je _memcmp_R2");
asm("jmp _memcmp_R3");
asm("_memcmp_R1:");
asm("xor %eax,%eax");
asm("jmp _memcmp_End");
asm("_memcmp_R2:");
asm("xor %eax,%eax");
asm("inc %al");
asm("jmp _memcmp_End");
asm("_memcmp_R3:");
asm("xor %eax,%eax");
asm("dec %rax");
asm("_memcmp_End:");
asm("pop %r11");
asm("pop %r10");
asm("pop %r9");
asm("pop %r8");
asm("pop %rdi");
asm("pop %rsi");
asm("pop %rbp");
asm("pop %rbx");
asm("pop %rdx");
asm("pop %rcx");
asm("ret");
#endif
